<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/stylebashboard.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet"
        href="https://res.cloudinary.com/dxfq3iotg/raw/upload/v1569006288/BBBootstrap/choices.min.css?version=7.0.0">
    <script
        src="https://res.cloudinary.com/dxfq3iotg/raw/upload/v1569006273/BBBootstrap/choices.min.js?version=7.0.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.1/feather.min.js"
        integrity="sha512-4lykFR6C2W55I60sYddEGjieC2fU79R7GUtaqr3DzmNbo0vSaO1MfUjMoTFYYuedjfEix6uV9jVTtRCSBU/Xiw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Dashboard</title>
    <style>
        #datatable-buttons_paginate,
        #datatable-buttons_info {
            display: none !important
        }

        .container {
            max-width: 1400px !important
        }

        .table {
            background-color: #ffffff;
            margin: 2px
        }

        .table-responsive {
            overflow-x: hidden !important;
        }

        .sorting,
        .sorting_desc,
        .sorting_asc {
            font-weight: 600;
            font-size: 12px;
        }

        .showingNumber {
            color: #c2cedc;
            font-weight: 300;
        }

        .inputSear {
            border: 1px solid #edf1f7;
            padding: 10px;
            border-radius: 5px;
        }

        /* Check out later: https://bbbootstrap.com/snippets/accordion-hover-effect-26103860 */

        .mt-100 {
            margin-top: 50px;
        }

        /* body {
            background: grey;
            color: #514B64;
            min-height: 100vh
        } */

        h2 {
            color: darkgreen;
        }

        #css-dropdown {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            width: 300px;
            height: 42px;
            margin: 100px auto 0 auto;
        }
    </style>
</head>

<body>
    <!-- nav bar start-->
    <nav class="nav-bar-container">
        <div>
            <img src="image/logo.png" alt="" />
        </div>
        <div class="logout-btn" id="logout">
            <p>Logout</p>
            <img src="image/log-out.svg" alt="" />
        </div>
    </nav>
    <!-- nav bar end -->

    <!-- dashboard start -->
    <main class="dashboard-container">
        <!-- total leads and today leads with username-->
        <section class="container-fluid">
            <section class="container">
                <article class="lead-box">
                    <div class="username">
                        <p>Welcome</p>
                        <p>NIkhil</p>
                    </div>
                    <div class="lead-numbers">
                        <div class="leads-count">
                            <h2 style="font-size: 1rem;font-weight: 400;padding: 8px;color:#212529">Today's<br>
                                Leads</h2>
                            <p class="count" id="todayCount">0</p>
                        </div>
                        <div class="leads-count">
                            <h2 style="font-size: 1rem;font-weight: 400;padding: 8px;color:#212529">Total<br>
                                Leads</h2>
                            <p class="count" id="totalCount">0</p>
                        </div>
                    </div>
                </article>
                <article class="search-filter-box">
                    <article class="search-box">
                        <div>
                            <h2 style="font-size: 1.5rem;font-weight: 400;padding: 15px;color:#212529">Leads Database
                            </h2>
                        </div>
                        <div class="search-wraper" style="padding: 15px;">
                            <div class="search-content">
                                <input type="search" placeholder="search" class="search-input-box" id="serachBar" />
                                <img src="image/search.svg" alt="" class="search-icon" />
                                <!-- <button class="search-btn">search</button> -->
                            </div>
                            <div class="setting ">
                                <img src="image/settings.svg" alt="" id="settingDropDown" disply-none=true />
                                <div class="date-dropdown-box d-none" id="dropdown">

                                    <div class="date-box">
                                        <div>
                                            <label for="startdate" class="label-heading">State Date</label>
                                            <input type="date" name="startdate" id="startdate" class="inputSear" />
                                        </div>
                                        <div>
                                            <label for="enddate" class="label-heading">End Date</label>
                                            <input type="date" name="enddate" id="enddate" class="inputSear" />
                                        </div>
                                        <!-- start -->

                                        <!-- end -->
                                    </div>
                                    <div class="date-box" style="margin-top:14px">
                                        <div class="col-md-12">
                                            <label for="enddate" class="label-heading">Source</label>
                                            <select id="choices-multiple-remove-button" placeholder="Select Sources"
                                                class="sourceMultiSelect" multiple name="source[]">
                                                @foreach($souce as $key =>$obj)
                                                <option value="{{$obj->id}}">{{$obj->name}}</option>
                                                @endforeach
                                            </select>
                                        </div>
                                    </div>
                                    <div class="date-box" style="margin-top:14px">
                                        <div class="col-md-12">
                                            <label for="enddate" class="label-heading">Project</label>
                                            <select id="choices-multiple-remove-button" placeholder="Select Projects"
                                                class="projectMultiSelect" multiple name="project[]">
                                                @foreach($project as $key =>$obj)
                                                <option value="{{$obj->id}}">{{$obj->name}}</option>
                                                @endforeach
                                            </select>
                                        </div>
                                    </div>

                                    <div class="btn-box mt-3">
                                        <button type="button" class="btn btn-outline-primary reset-button">
                                            RESET
                                        </button>
                                        <button class="btn btn-outline-primary filter-button" id="filterForm">
                                            FILTER
                                        </button>
                                    </div>

                                </div>
                            </div>
                            <div class="dowanload" style=" width: 144px; height: 50px;" id="clickExcel">
                                <img src="image/download.svg" alt="" />
                                <p>
                                    Download <br />
                                    Excel sheet
                                </p>
                            </div>
                        </div>
                    </article>
                </article>
                <article>
                    <article class="table-responsive">
                        <table class="table" id="datatable-buttons">
                            <thead>
                                <tr>
                                    <th scope="col">Lead ID</th>
                                    <th scope="col">Full Name</th>
                                    <th scope="col">Contact Number</th>
                                    <th scope="col">Email Address</th>
                                    <th scope="col">Project</th>
                                    <th scope="col">Source</th>
                                    <th scope="col">Creation Date</th>
                                </tr>
                            </thead>

                        </table>
                    </article>
                    <article class="container" style="background-color:#ffffff; margin-bottom: 2rem">
                        <div class="row" style="justify-content: space-between">
                            <div class="col-auto d-flex" style="padding:14px"><span
                                    class="material-symbols-outlined paginationFunction" id="start_page" pagevalue="">
                                    first_page
                                </span><span class="material-symbols-outlined paginationFunction" id="prev_page"
                                    pagevalue="">
                                    chevron_left
                                </span> <span id="pageNumber"
                                    style="background: #edf1f7;padding: 0px 10px;border-radius: 7px;">01</span> <span
                                    class="material-symbols-outlined paginationFunction" id="next_page" pagevalue="">
                                    chevron_right
                                </span><span class="material-symbols-outlined paginationFunction" id="last_page"
                                    pagevalue="">
                                    last_page
                                </span>
                                <span class="showingNumber" style="padding-left:10px">Showing Results </span> <span
                                    class="showingNumber" style="padding-left:03px" id="show_number"> 100 </span><span
                                    class="showingNumber" style="padding-left:03px"> / </span><span
                                    class="showingNumber totalCount" style="padding-left:03px"> 200</span>

                            </div>
                            <div class="col-auto float-right" style="padding:14px"><span class="showingNumber"
                                    style="padding-right:10px">Show Rows</span><select
                                    style="border: none;background-color: #edf1f7;border-radius: 6px;padding: 0px 5px;"
                                    id="paginationId" name="pageNumber">
                                    <option value="10" selected>10</option>
                                    <option value="15">15</option>
                                    <option value="20">20</option>
                                </select></div>
                        </div>
                    </article>
                    <div class="no-data d-none">
                        <img src="image/face.png" alt="" />
                        <p class="awkward-text">AWKWARD</p>
                        <p class="no-data-text">There is nothing here to See!</p>
                    </div>
                </article>
            </section>
        </section>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="{{asset('public/themes//js/pages/datatables.init.js')}}"></script>
    <script src="{{asset('public/themes//libs/datatables.net/js/jquery.dataTables.min.js')}}"></script>
    <script>
        $(document).ready(function () {
            initializeDataTable();
            var multipleCancelButton = new Choices('#choices-multiple-remove-button', {
                removeItemButton: true,
                maxItemCount: 10,
                searchResultLimit: 5,
                renderChoiceLimit: 5
            });


            $('#filterForm').click(function () {
                let startDate = $('#startdate').val();
                let endDate = $('#enddate').val();
                let source = $('.sourceMultiSelect').val();
                let project = $('.projectMultiSelect').val();
                let pagelenght = $('#paginationId').val();
                let keyWord = $('#serachBar').val();
                initializeDataTableSearch(startDate, endDate, source, project, pagelenght, keyWord);
            });
            $('.paginationFunction').click(function (e) {
                let offset = $(this).attr('pagevalue');
                let currentpgae = $(this).attr('pagevaluenumber');

                let pagelenght = $('#paginationId').val();
                let startDate = $('#startdate').val();
                let endDate = $('#enddate').val();
                let source = $('.sourceMultiSelect').val();
                let project = $('.projectMultiSelect').val();
                let keyWord = $('#serachBar').val();
                initializeDataTableSearch(startDate, endDate, source, project, pagelenght, keyWord, offset, currentpgae);

            });

            $('#paginationId').change(function (e) {
                let offset = 0;
                let currentpgae = 1;
                let pagelenght = $(this).val();
                let startDate = $('#startdate').val();
                let endDate = $('#enddate').val();
                let source = $('.sourceMultiSelect').val();
                let project = $('.projectMultiSelect').val();
                initializeDataTableSearch(startDate, endDate, source, project, pagelenght, offset, currentpgae);
            })

            $('#serachBar').keyup(function (e) {
                let offset = 0;
                let currentpgae = 1;
                let pagelenght = $('#paginationId').val();
                let startDate = $('#startdate').val();
                let endDate = $('#enddate').val();
                let source = $('.sourceMultiSelect').val();
                let project = $('.projectMultiSelect').val();
                let keyWord = $(this).val();
                initializeDataTableSearch(startDate, endDate, source, project, pagelenght, keyWord, offset, currentpgae);
            })

            $('#clickExcel').click(function () {
                let search = $('#serachBar').val();
                let startDate = $('#startdate').val();
                let endDate = $('#enddate').val();
                let source = $('.sourceMultiSelect').val();
                let project = $('.projectMultiSelect').val();
                window.location.href = "{{route('excel')}}?keyword=" + search + "&startDate=" + startDate + "&endDate=" + endDate + "&project=" + project + "&source=" + source;
            });

            $('#logout').click(function () {
                location.href = "{{route('auth.logout')}}"
            });

        });
    </script>

    <script>
        $('#settingDropDown').click(function () {
            if ($(this).attr("disply-none") == "true") {
                $(this).attr("disply-none", 'false');
                $('#dropdown').removeClass('d-none');
            } else {
                $(this).attr("disply-none", 'true');
                $('#dropdown').addClass('d-none');
            }
        });




    </script>

</body>

</html>